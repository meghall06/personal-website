<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Leveling Up with the Tidyverse   (and hockey data)</title>
    <meta charset="utf-8" />
    <meta name="author" content="Carnegie Mellon Sports Analytics Conference   October 25, 2020 | #CMSAC20" />
    <script src="libs_CMSAC/header-attrs/header-attrs.js"></script>
    <link href="libs_CMSAC/font-awesome/css/fontawesome-all.min.css" rel="stylesheet" />
    <script src="libs_CMSAC/kePrint/kePrint.js"></script>
    <link href="libs_CMSAC/lightable/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: left, middle, title-slide

# Leveling Up with the Tidyverse <br> (and hockey data)
## Meghan Hall
### Carnegie Mellon Sports Analytics Conference <br> October 25, 2020 | #CMSAC20
### <i class="fab  fa-twitter "></i> <span class="citation">@MeghanMHall</span> <br> <i class="fab  fa-github "></i> meghall06 <br> <i class="fas  fa-link "></i> meghan.rbind.io

---






# Me, Exceedingly Briefly

--

1Ô∏è‚É£&amp;nbsp; I work in higher ed as a data manager.

&lt;br&gt;
&lt;br&gt;

--

2Ô∏è‚É£&amp;nbsp; I dabble in hockey analysis.

&lt;br&gt;
&lt;br&gt;

--

3Ô∏è‚É£&amp;nbsp; I use R a **lot**, thanks to 1Ô∏è‚É£ and 2Ô∏è‚É£, and love helping other people learn.

&lt;br&gt;
&lt;br&gt;

---

# The Plan for Today

--

Do you need to know anything about hockey?

--

**No.**

---
background-image: url(https://pbs.twimg.com/media/D6gCaiyW0AAAwdf?format=jpg&amp;name=large)
background-position: center
background-size: contain
class: center, inverse

---

# The Plan for Today

Do you need to know anything about hockey?

**No.**

&lt;br&gt;
&lt;br&gt;

Do you need to know anything about coding?

--

**Eh.**

---

# The Plan for Today


**GOAL**: "Level up your R programming and make your analysis more efficient."

--

&lt;br&gt;

1Ô∏è‚É£&amp;nbsp; Data manipulation with `tidyr` and `dplyr` (and `stringr` and `lubridate` and `purrr`!)

--

2Ô∏è‚É£&amp;nbsp; User-defined functions

--

3Ô∏è‚É£&amp;nbsp; Custom `ggplot2` themes

&lt;br&gt;

--

üïó&amp;nbsp; 5-minute breaks at 5:00 and 5:30

--

‚ùì&amp;nbsp; Questions!

&lt;br&gt;

--

**HOW**: Let's examine the composition of a power play.

---

class: center, middle

# Five-on-five

&lt;img src="figs/CMSAC/5-5.png" width="400" style="display: block; margin: auto;" /&gt;

---

class: center, middle

# Five-on-four with three forwards

&lt;img src="figs/CMSAC/3-2.png" width="400" style="display: block; margin: auto;" /&gt;

---

class: center, middle

# Five-on-four with four forwards

&lt;img src="figs/CMSAC/4-1.png" width="400" style="display: block; margin: auto;" /&gt;

---

# Two questions

--

1Ô∏è‚É£&amp;nbsp; How does the positional composition change over the time of the power play?

&lt;br&gt;

(Is the four-forward configuration maybe more common at the beginning or the end of the power play?)

&lt;br&gt;

--

2Ô∏è‚É£&amp;nbsp; Does a four-forward power play unit have a higher rate of zone exits?

---
class: inverse, center, middle

# Let's Get Set Up

---

# If you want to follow along

--

&lt;img src="figs/CMSAC/pipes_logo.png" width="200" style="display: block; margin: auto;" /&gt;

--


```r
# Load the package
devtools::install_github("meghall06/betweenthepipes")
library(betweenthepipes)

# Load the data
pbp &lt;- pbp_example
bio &lt;- bio_example
tracking &lt;- track_example
```

---

# Data sources

--

### Play-by-play data

- `pbp`: NHL play-by-play data
- Four Philadelphia Flyers games in November 2019
- Scraped via the [Evolving-Hockey]() R scraper

---

# Data sources

&lt;table class="table" style="font-size: 9.5px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_date &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_period &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_type &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_description &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PGSTR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PGEND &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANTHEM &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PSTR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Period Start- Local time: 7:08 EST &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CHANGE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CHANGE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FAC &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI won Neu. Zone - PHI #28 GIROUX vs CAR #20 AHO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; GIVE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI¬†GIVEAWAY - #28 GIROUX, Neu. Zone &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CHANGE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CHANGE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Data sources

&lt;table class="table" style="font-size: 9.5px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_date &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_period &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_type &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_description &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PGSTR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PGEND &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANTHEM &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PSTR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Period Start- Local time: 7:08 EST &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CHANGE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CHANGE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FAC &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI won Neu. Zone - PHI #28 GIROUX vs CAR #20 AHO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; GIVE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI¬†GIVEAWAY - #28 GIROUX, Neu. Zone &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CHANGE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CHANGE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Data sources

&lt;table class="table" style="font-size: 9.5px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_date &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_period &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_type &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_description &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PGSTR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PGEND &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANTHEM &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PSTR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Period Start- Local time: 7:08 EST &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CHANGE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CHANGE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FAC &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI won Neu. Zone - PHI #28 GIROUX vs CAR #20 AHO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 21 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 21 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; GIVE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI¬†GIVEAWAY - #28 GIROUX, Neu. Zone &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CHANGE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 31 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CHANGE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


---

# Data sources

&lt;table class="table" style="font-size: 9.5px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_strength_state &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; home_team &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; away_team &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; home_on_1 &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; home_on_2 &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; home_on_3 &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; home_on_4 &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; home_on_5 &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; home_on_6 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 5v4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; JACCOB.SLAVIN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; JORDAN.STAAL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; WARREN.FOEGELE &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 5v4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 5v4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 5v4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 5v4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 5v4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 5v4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 5v4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 5v4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 4v5 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRETT.PESCE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BROCK.MCGINN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; JOEL.EDMUNDSON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; JORDAN.STAAL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Data sources


```r
pbp %&gt;% 
  count(game_id, game_date, home_team, away_team)
```

&lt;table class="table" style="font-size: 20px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_date &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; home_team &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; away_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; n &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-21 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 586 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020349 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CGY &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 682 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020367 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-25 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; VAN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 606 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020384 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-27 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CBJ &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 627 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
---

# Data sources

### Play-by-play data

- `pbp`: NHL play-by-play data
- Four Philadelphia Flyers games in November 2019
- Scraped via the [Evolving-Hockey]() R scraper

### Skater Data

- `bio`: Demographic and position data for these players from 2019
- Downloaded from [Natural Stat Trick]()

---

# Data sources

&lt;table class="table" style="font-size: 15px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Player &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Position &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Age &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Date of Birth &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Birth City &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Birth State/Province &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Birth Country &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Nationality &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Height (in) &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Weight (lbs) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Adam Gaudette &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 10/3/96 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Braintree &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 73 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 170 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Alan Quine &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2/25/93 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Belleville &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 72 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 203 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Alexander Edler &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 4/21/86 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ostersund &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 212 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Alexander Wennberg &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 25 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 9/22/94 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Stockholm &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 74 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 197 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Alexander Yelesin &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2/7/96 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yaroslavl &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 72 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 195 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Alexandre Texier &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 9/13/99 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; St. Martin D'heres &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FRA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FRA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 72 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 192 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Andrei Svechnikov &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; R &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3/26/00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Barnual &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 74 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 195 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Andrew Mangiapane &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; L &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 4/4/96 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Toronto &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 184 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Andrew Peeke &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3/17/98 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Parkland &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 194 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Andy Andreoff &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 5/17/91 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Pickering &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 73 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 203 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Data sources

&lt;table class="table" style="font-size: 15px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Player &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Position &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Age &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Date of Birth &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Birth City &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Birth State/Province &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Birth Country &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Nationality &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Height (in) &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Weight (lbs) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Adam Gaudette &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 10/3/96 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Braintree &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 73 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 170 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Alan Quine &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2/25/93 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Belleville &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 72 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 203 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Alexander Edler &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 4/21/86 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ostersund &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 212 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Alexander Wennberg &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 25 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 9/22/94 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Stockholm &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 74 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 197 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Alexander Yelesin &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2/7/96 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yaroslavl &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 72 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 195 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Alexandre Texier &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 9/13/99 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; St. Martin D'heres &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FRA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FRA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 72 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 192 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Andrei Svechnikov &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; R &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3/26/00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Barnual &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 74 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 195 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Andrew Mangiapane &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; L &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 4/4/96 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Toronto &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 184 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Andrew Peeke &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3/17/98 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Parkland &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 194 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Andy Andreoff &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 5/17/91 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Pickering &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 73 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 203 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Data sources

### Play-by-play data

- `pbp`: NHL play-by-play data
- Four Philadelphia Flyers games in November 2019
- Scraped via the [Evolving-Hockey]() R scraper

### Skater Data

- `bio`: Demographic and position data for these players from 2019
- Downloaded from [Natural Stat Trick]()

### Tracking Data

- `tracking`: Zone exit data on the power play in these four games
- Personally tracked by me!

---

# Data sources

&lt;table class="table" style="font-size: 20px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_period &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; time &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_type &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 16:02:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 15:27:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 14:42:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 13:57:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 12:36:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 12:12:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 18:36:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 18:10:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 17:20:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 14:40:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Data sources

&lt;table class="table" style="font-size: 20px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_period &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; time &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_type &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 16:02:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 15:27:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 14:42:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 13:57:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 12:36:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 12:12:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 18:36:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 18:10:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 17:20:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 14:40:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Data sources

### Play-by-play data

- `pbp`: NHL play-by-play data
- Four Philadelphia Flyers games in November 2019
- Scraped via the [Evolving-Hockey]() R scraper

### Skater Data

- `bio`: Demographic and position data for these players from 2019
- Downloaded from [Natural Stat Trick]()

### Tracking Data

- `tracking`: Zone exit data on the power play in these four games
- Personally tracked by me!

---
class: inverse, center, middle

# Plan of attack

---

# Plan of attack

üßê&amp;nbsp; Study your different data sources

&lt;br&gt;
&lt;br&gt;
--

üîé&amp;nbsp; Find the relationships

&lt;br&gt;
&lt;br&gt;
--

üìù&amp;nbsp; Sketch out how you want your data to look at the end

---

# Problems we get to solve

‚ùå&amp;nbsp; Player position data is in a different place

&lt;br&gt;
&lt;br&gt;

--

‚ùå&amp;nbsp; Zone exit data is in a different place

&lt;br&gt;
&lt;br&gt;

--

‚ùå&amp;nbsp; One row per event instead of one row per second ü§î

&lt;br&gt;
&lt;br&gt;

---

# Packages we'll be using

--

‚≠ê&amp;nbsp; My package (where the data is)


```r
library(betweenthepipes)
```
--
‚ù§Ô∏è&amp;nbsp; The tidyverse (aka `dplyr`, `tidyr`, `ggplot2`, `stringr`)


```r
library(tidyverse)
```
--
üï¶&amp;nbsp; For dealing with time (also part of the tidyverse)


```r
library(lubridate)
```
--
üßπ&amp;nbsp; For some data cleaning help


```r
library(janitor)
```

--
üîÇ&amp;nbsp; For padding out our data


```r
library(padr)
```

---
class: inverse, center, middle

# Play by play data
---

# Play by play data


```r
power &lt;- pbp %&gt;%
  # filter to only the power play strength states
  filter(game_strength_state %in% c("5v4", "4v5")) %&gt;%
  # filter to only events that have time associated with them
  filter(event_length &gt; 0) %&gt;%
  # create a new variable that designates the PP team
  mutate(PP_team = ifelse(game_strength_state == "5v4", 
                          home_team, away_team)) %&gt;%
  # create a new set of variables to determine who the PP players are
  mutate(PP_1 = ifelse(home_team == PP_team, home_on_1, away_on_1),
         PP_2 = ifelse(home_team == PP_team, home_on_2, away_on_2),
         PP_3 = ifelse(home_team == PP_team, home_on_3, away_on_3),
         PP_4 = ifelse(home_team == PP_team, home_on_4, away_on_4),
         PP_5 = ifelse(home_team == PP_team, home_on_5, away_on_5),
         PP_6 = ifelse(home_team == PP_team, home_on_6, away_on_6))
```

---

# Play by play data


```r
power &lt;- pbp %&gt;%
  # filter to only the power play strength states
* filter(game_strength_state %in% c("5v4", "4v5")) %&gt;%
  # filter to only events that have time associated with them
  filter(event_length &gt; 0) %&gt;%
  # create a new variable that designates the PP team
  mutate(PP_team = ifelse(game_strength_state == "5v4", 
                          home_team, away_team)) %&gt;%
  # create a new set of variables to determine who the PP players are
  mutate(PP_1 = ifelse(home_team == PP_team, home_on_1, away_on_1),
         PP_2 = ifelse(home_team == PP_team, home_on_2, away_on_2),
         PP_3 = ifelse(home_team == PP_team, home_on_3, away_on_3),
         PP_4 = ifelse(home_team == PP_team, home_on_4, away_on_4), 
         PP_5 = ifelse(home_team == PP_team, home_on_5, away_on_5),
         PP_6 = ifelse(home_team == PP_team, home_on_6, away_on_6))
```

---

# Play by play data


```r
power &lt;- pbp %&gt;%
  # filter to only the power play strength states
  filter(game_strength_state %in% c("5v4", "4v5")) %&gt;% 
  # filter to only events that have time associated with them
* filter(event_length &gt; 0) %&gt;%
  # create a new variable that designates the PP team
  mutate(PP_team = ifelse(game_strength_state == "5v4", 
                          home_team, away_team)) %&gt;%
  # create a new set of variables to determine who the PP players are
  mutate(PP_1 = ifelse(home_team == PP_team, home_on_1, away_on_1),
         PP_2 = ifelse(home_team == PP_team, home_on_2, away_on_2),
         PP_3 = ifelse(home_team == PP_team, home_on_3, away_on_3),
         PP_4 = ifelse(home_team == PP_team, home_on_4, away_on_4), 
         PP_5 = ifelse(home_team == PP_team, home_on_5, away_on_5),
         PP_6 = ifelse(home_team == PP_team, home_on_6, away_on_6))
```

---

# Play by play data


```r
power &lt;- pbp %&gt;%
  # filter to only the power play strength states
  filter(game_strength_state %in% c("5v4", "4v5")) %&gt;% 
  # filter to only events that have time associated with them
  filter(event_length &gt; 0) %&gt;% 
  # create a new variable that designates the PP team
* mutate(PP_team = ifelse(game_strength_state == "5v4",
*                         home_team, away_team)) %&gt;%
  # create a new set of variables to determine who the PP players are
  mutate(PP_1 = ifelse(home_team == PP_team, home_on_1, away_on_1),
         PP_2 = ifelse(home_team == PP_team, home_on_2, away_on_2),
         PP_3 = ifelse(home_team == PP_team, home_on_3, away_on_3),
         PP_4 = ifelse(home_team == PP_team, home_on_4, away_on_4), 
         PP_5 = ifelse(home_team == PP_team, home_on_5, away_on_5),
         PP_6 = ifelse(home_team == PP_team, home_on_6, away_on_6))
```

---

# Play by play data


```r
power &lt;- pbp %&gt;%
  # filter to only the power play strength states
  filter(game_strength_state %in% c("5v4", "4v5")) %&gt;% 
  # filter to only events that have time associated with them
  filter(event_length &gt; 0) %&gt;% 
  # create a new variable that designates the PP team
  mutate(PP_team = ifelse(game_strength_state == "5v4", 
                          home_team, away_team)) %&gt;%
  # create a new set of variables to determine who the PP players are
* mutate(PP_1 = ifelse(home_team == PP_team, home_on_1, away_on_1),
*        PP_2 = ifelse(home_team == PP_team, home_on_2, away_on_2),
*        PP_3 = ifelse(home_team == PP_team, home_on_3, away_on_3),
*        PP_4 = ifelse(home_team == PP_team, home_on_4, away_on_4),
*        PP_5 = ifelse(home_team == PP_team, home_on_5, away_on_5),
*        PP_6 = ifelse(home_team == PP_team, home_on_6, away_on_6))
```

---

# Play by play data

&lt;table class="table" style="font-size: 10px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_1 &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_2 &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_3 &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_4 &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_5 &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_6 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 46 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 60 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CLAUDE.GIROUX &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; IVAN.PROVOROV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; JAMES.VAN RIEMSDYK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MORGAN.FROST &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRAVIS.KONECNY &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 61 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CLAUDE.GIROUX &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; IVAN.PROVOROV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; JAMES.VAN RIEMSDYK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MORGAN.FROST &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRAVIS.KONECNY &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 62 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CLAUDE.GIROUX &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; IVAN.PROVOROV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; JAMES.VAN RIEMSDYK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MORGAN.FROST &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRAVIS.KONECNY &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 66 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; JAKUB.VORACEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MATT.NISKANEN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; OSKAR.LINDBLOM &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEAN.COUTURIER &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SHAYNE.GOSTISBEHERE &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---
class: middle, inverse

&lt;img src="figs/CMSAC/pivot.gif" width="600" style="display: block; margin: auto;" /&gt;

---

# Play by play data


```r
pivot &lt;- power %&gt;%
  # pick the variables that we want
* select(game_id, event_index, PP_team, game_seconds, event_length,
*        home_goalie, away_goalie, PP_1:PP_6) %&gt;%
  # pivot the six player variables
  pivot_longer(PP_1:PP_6, 
               names_to = "on_ice", 
               values_to = "player") %&gt;%
  # filter out the goalies
  filter(player != home_goalie &amp; player != away_goalie) %&gt;%
  # remove the now-unnecessary goalie variables
  select(-c(home_goalie, away_goalie, on_ice))
```

---

# Play by play data


```r
pivot &lt;- power %&gt;%
  # pick the variables that we want
  select(game_id, event_index, PP_team, game_seconds, event_length,
         home_goalie, away_goalie, PP_1:PP_6) %&gt;%                   
  # pivot the six player variables
* pivot_longer(PP_1:PP_6,
*              names_to = "on_ice",
*              values_to = "player") %&gt;%
  # filter out the goalies
  filter(player != home_goalie &amp; player != away_goalie) %&gt;%
  # remove the now-unnecessary goalie variables
  select(-c(home_goalie, away_goalie, on_ice))
```

---

# Play by play data

&lt;table class="table" style="font-size: 12px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; home_goalie &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; away_goalie &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; on_ice &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; player &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_3 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_5 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_6 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_3 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_5 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_6 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Play by play data

&lt;table class="table" style="font-size: 12px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; home_goalie &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; away_goalie &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; on_ice &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; player &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_2 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_3 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PETR.MRAZEK &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_4 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; RYAN.DZINGEL &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_5 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; SEBASTIAN.AHO &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_6 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_2 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_3 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PETR.MRAZEK &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_4 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; RYAN.DZINGEL &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_5 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; SEBASTIAN.AHO &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_6 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Play by play data

&lt;table class="table" style="font-size: 12px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; home_goalie &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; away_goalie &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; on_ice &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; player &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_3 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PETR.MRAZEK &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_5 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_6 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_3 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PETR.MRAZEK &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_5 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PETR.MRAZEK &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BRIAN.ELLIOTT &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PP_6 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Play by play data


```r
pivot &lt;- power %&gt;%
  # pick the variables that we want
  select(game_id, event_index, PP_team, game_seconds, event_length,
         home_goalie, away_goalie, PP_1:PP_6) %&gt;%                   
  # pivot the six player variables
  pivot_longer(PP_1:PP_6, 
               names_to = "on_ice", 
               values_to = "player") %&gt;% 
  # filter out the goalies
* filter(player != home_goalie &amp; player != away_goalie) %&gt;%
  # remove the now-unnecessary goalie variables
  select(-c(home_goalie, away_goalie, on_ice))
```

---

# Play by play data


```r
pivot &lt;- power %&gt;%
  # pick the variables that we want
  select(game_id, event_index, PP_team, game_seconds, event_length,
         home_goalie, away_goalie, PP_1:PP_6) %&gt;%                   
  # pivot the six player variables
  pivot_longer(PP_1:PP_6,
               names_to = "on_ice",
               values_to = "player") %&gt;% 
  # filter out the goalies
  filter(player != home_goalie &amp; player != away_goalie) %&gt;%
  # remove the now-unnecessary goalie variables
* select(-c(home_goalie, away_goalie, on_ice))
```

---

# Play by play data

&lt;table class="table" style="font-size: 12px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; player &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

class: inverse, center, middle

# Skater data

---

# Skater data


```r
bio &lt;- bio %&gt;%
  # reformat the variable names
  clean_names() %&gt;%
  # use two stringr functions to convert our player names to all 
  # uppercase and replace the first space with a period
  mutate(player = str_to_upper(player),
         player = str_replace(player, " ", ".")) %&gt;%
  # record our position variable into a 0/1 variable for forward
  mutate(forward = ifelse(position == "D", 0, 1)) %&gt;%
  # select only these two variables
  select(player, forward)
```

---

# Skater data


```r
bio &lt;- bio %&gt;%
  # reformat the variable names
* clean_names() %&gt;%
  # use two stringr functions to convert our player names to all 
  # uppercase and replace the first space with a period
  mutate(player = str_to_upper(player),
         player = str_replace(player, " ", ".")) %&gt;%
  # record our position variable into a 0/1 variable for forward
  mutate(forward = ifelse(position == "D", 0, 1)) %&gt;%
  # select only these two variables
  select(player, forward)
```

---

# Skater data

&lt;table class="table" style="font-size: 15px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Player &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Position &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Age &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Date of Birth &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Birth City &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Birth State/Province &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Birth Country &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Nationality &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Height (in) &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; Weight (lbs) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Adam Gaudette &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 10/3/96 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Braintree &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 73 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 170 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Alan Quine &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2/25/93 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Belleville &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 72 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 203 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Alexander Edler &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 4/21/86 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ostersund &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 212 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Alexander Wennberg &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 25 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 9/22/94 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Stockholm &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 74 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 197 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Alexander Yelesin &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2/7/96 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yaroslavl &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 72 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 195 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Alexandre Texier &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 9/13/99 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; St. Martin D'heres &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FRA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FRA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 72 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 192 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Andrei Svechnikov &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; R &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3/26/00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Barnual &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 74 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 195 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Andrew Mangiapane &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; L &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 4/4/96 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Toronto &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 184 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Andrew Peeke &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3/17/98 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Parkland &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 194 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Andy Andreoff &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 5/17/91 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Pickering &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 73 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 203 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Skater data

&lt;table class="table" style="font-size: 15px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; player &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; position &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; date_of_birth &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; birth_city &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; birth_state_province &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; birth_country &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; nationality &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; height_in &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Adam Gaudette &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 10/3/96 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Braintree &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 73 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Alan Quine &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2/25/93 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Belleville &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 72 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Alexander Edler &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 4/21/86 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ostersund &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Alexander Wennberg &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 25 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 9/22/94 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Stockholm &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 74 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Alexander Yelesin &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2/7/96 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yaroslavl &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 72 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Alexandre Texier &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 9/13/99 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; St. Martin D'heres &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FRA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FRA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 72 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Andrei Svechnikov &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; R &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3/26/00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Barnual &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 74 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Andrew Mangiapane &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; L &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 4/4/96 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Toronto &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Andrew Peeke &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3/17/98 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Parkland &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Andy Andreoff &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 5/17/91 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Pickering &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 73 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Skater data


```r
bio &lt;- bio %&gt;%
  # reformat the variable names
  clean_names() %&gt;%
  # use two stringr functions to convert our player names to all 
  # uppercase and replace the first space with a period
* mutate(player = str_to_upper(player),
*        player = str_replace(player, " ", ".")) %&gt;%
  # record our position variable into a 0/1 variable for forward
  mutate(forward = ifelse(position == "D", 0, 1)) %&gt;%
  # select only these two variables
  select(player, forward)
```

---

# Skater data

&lt;table class="table" style="font-size: 15px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; player &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; position &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; date_of_birth &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; birth_city &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; birth_state_province &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; birth_country &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; nationality &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; ADAM.GAUDETTE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 10/3/96 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Braintree &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; ALAN.QUINE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2/25/93 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Belleville &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; ALEXANDER.EDLER &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 4/21/86 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ostersund &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; ALEXANDER.WENNBERG &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 25 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 9/22/94 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Stockholm &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; ALEXANDER.YELESIN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2/7/96 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yaroslavl &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; ALEXANDRE.TEXIER &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 9/13/99 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; St. Martin D'heres &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FRA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FRA &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; R &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3/26/00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Barnual &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; ANDREW.MANGIAPANE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; L &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 4/4/96 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Toronto &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; ANDREW.PEEKE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3/17/98 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Parkland &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; ANDY.ANDREOFF &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 5/17/91 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Pickering &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Skater data

&lt;table class="table" style="font-size: 15px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; player &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; position &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; date_of_birth &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; birth_city &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; birth_state_province &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; birth_country &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; nationality &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ADAM.GAUDETTE &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 10/3/96 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Braintree &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ALAN.QUINE &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2/25/93 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Belleville &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ALEXANDER.EDLER &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 4/21/86 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ostersund &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ALEXANDER.WENNBERG &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 25 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 9/22/94 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Stockholm &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SWE &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ALEXANDER.YELESIN &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2/7/96 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Yaroslavl &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ALEXANDRE.TEXIER &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 9/13/99 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; St. Martin D'heres &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FRA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FRA &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; R &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3/26/00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Barnual &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RUS &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ANDREW.MANGIAPANE &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; L &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 4/4/96 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Toronto &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ANDREW.PEEKE &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3/17/98 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Parkland &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; USA &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ANDY.ANDREOFF &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 5/17/91 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Pickering &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ON &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAN &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Skater data


```r
bio &lt;- bio %&gt;%
  # reformat the variable names
  clean_names() %&gt;%
  # use two stringr functions to convert our player names to all 
  # uppercase and replace the first space with a period
  mutate(player = str_to_upper(player),
         player = str_replace(player, " ", ".")) %&gt;% 
  # record our position variable into a 0/1 variable for forward
* mutate(forward = ifelse(position == "D", 0, 1)) %&gt;%
  # select only these two variables
  select(player, forward)
```

---

# Skater data


```r
bio &lt;- bio %&gt;%
  # reformat the variable names
  clean_names() %&gt;%
  # use two stringr functions to convert our player names to all 
  # uppercase and replace the first space with a period
  mutate(player = str_to_upper(player),
         player = str_replace(player, " ", ".")) %&gt;% 
  # record our position variable into a 0/1 variable for forward
  mutate(forward = ifelse(position == "D", 0, 1)) %&gt;% 
  # select only these two variables
* select(player, forward)
```

---

# Skater data

&lt;table class="table" style="font-size: 15px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; player &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; forward &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ADAM.GAUDETTE &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ALAN.QUINE &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ALEXANDER.EDLER &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ALEXANDER.WENNBERG &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ALEXANDER.YELESIN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ALEXANDRE.TEXIER &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ANDREW.MANGIAPANE &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ANDREW.PEEKE &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ANDY.ANDREOFF &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Skater data


```r
pivot_position &lt;- pivot %&gt;%
  left_join(bio, by = "player")
```

--

&lt;table class="table" style="font-size: 15px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; player &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; forward &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Skater data


```r
pivot_position %&gt;%
  get_dupes(game_id, event_index, player)
```

```
## # A tibble: 0 x 8
## # ‚Ä¶ with 8 variables: game_id &lt;dbl&gt;, event_index &lt;dbl&gt;, player &lt;chr&gt;,
## #   dupe_count &lt;int&gt;, PP_team &lt;chr&gt;, game_seconds &lt;dbl&gt;, event_length &lt;dbl&gt;,
## #   forward &lt;dbl&gt;
```

---

# Skater data


```r
fixes &lt;- pivot_position %&gt;%
  filter(is.na(forward)) %&gt;%
  count(player) %&gt;%
  arrange(player)
```

--

&lt;table class="table" style="font-size: 15px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; player &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; n &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ALEX.EDLER &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ALEX.WENNBERG &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; CHRIS.TANEV &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


---

# Skater data


```r
bio %&gt;%
  filter(str_detect(player, 'EDLER|WENNBERG|TANEV'))
```

--

&lt;table class="table" style="font-size: 15px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; player &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; forward &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ALEXANDER.EDLER &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ALEXANDER.WENNBERG &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; CHRISTOPHER.TANEV &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Skater data


```r
bio &lt;- bio %&gt;%
  mutate(player = case_when(
                      player == "ALEXANDER.EDLER" ~ "ALEX.EDLER",
                      player == "ALEXANDER.WENNBERG" ~ "ALEX.WENNBERG",
                      player == "CHRISTOPHER.TANEV" ~ "CHRIS.TANEV",
                      TRUE ~ player))
```

--


```r
pivot_position &lt;- pivot %&gt;%
  left_join(bio, by = "player")

fixes &lt;- pivot_position %&gt;%
  filter(is.na(forward)) %&gt;%
  count(player) %&gt;%
  arrange(player)
```

--

&lt;table class="table" style="font-size: 15px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; player &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; n &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;

  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Play by play

&lt;table class="table" style="font-size: 15px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; player &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; forward &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---
class: middle, inverse

&lt;img src="figs/CMSAC/pivot.gif" width="600" style="display: block; margin: auto;" /&gt;

---

# Play by play


```r
data &lt;- pivot_position %&gt;%
  # first create a basic count variable for each player within a PP
  group_by(game_id, event_index) %&gt;%
  mutate(on_ice = row_number()) %&gt;%
  ungroup() %&gt;%
  # pivot the players and positions
  pivot_wider(names_from = "on_ice", 
              values_from = c("player", "forward")) %&gt;%
  # create a variable to count the number of forwards
  mutate(PP_fwds = select(., forward_1:forward_5) %&gt;% 
           rowSums(na.rm = TRUE)) %&gt;%
  # remove the now-unnecessary variables
  select(-c(player_1:forward_5))
```

---

# Play by play


```r
data &lt;- pivot_position %&gt;%
  # first create a basic count variable for each player within a PP
* group_by(game_id, event_index) %&gt;%
* mutate(on_ice = row_number()) %&gt;%
* ungroup() %&gt;%
  # pivot the players and positions
  pivot_wider(names_from = "on_ice", 
              values_from = c("player", "forward")) %&gt;%
  # create a variable to count the number of forwards
  mutate(PP_fwds = select(., forward_1:forward_5) %&gt;% 
           rowSums(na.rm = TRUE)) %&gt;%
  # remove the now-unnecessary variables
  select(-c(player_1:forward_5))
```

---

# Play by play

&lt;table class="table" style="font-size: 15px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; player &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; forward &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; on_ice &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 5 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; RYAN.DZINGEL &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; SEBASTIAN.AHO &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TEUVO.TERAVAINEN &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 5 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Play by play


```r
data &lt;- pivot_position %&gt;%
  # first create a basic count variable for each player within a PP
  group_by(game_id, event_index) %&gt;%
  mutate(on_ice = row_number()) %&gt;%
  ungroup() %&gt;% 
  # pivot the players and positions
* pivot_wider(names_from = "on_ice",
*             values_from = c("player", "forward")) %&gt;%
  # create a variable to count the number of forwards
  mutate(PP_fwds = select(., forward_1:forward_5) %&gt;% 
           rowSums(na.rm = TRUE)) %&gt;%
  # remove the now-unnecessary variables
  select(-c(player_1:forward_5))
```

---

# Play by play

&lt;table class="table" style="font-size: 12px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; player_1 &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; forward_1 &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; player_2 &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; forward_2 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 265 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 267 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 272 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 46 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 276 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; ANDREI.SVECHNIKOV &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; DOUGIE.HAMILTON &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 60 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 313 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 33 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; CLAUDE.GIROUX &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; IVAN.PROVOROV &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 61 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 346 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; CLAUDE.GIROUX &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; IVAN.PROVOROV &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 62 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 356 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; CLAUDE.GIROUX &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; IVAN.PROVOROV &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 66 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 357 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; JAKUB.VORACEK &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; MATT.NISKANEN &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Play by play


```r
data &lt;- pivot_position %&gt;%
  # first create a basic count variable for each player within a PP
  group_by(game_id, event_index) %&gt;%
  mutate(on_ice = row_number()) %&gt;%
  ungroup() %&gt;% 
  # pivot the players and positions
  pivot_wider(names_from = "on_ice", 
              values_from = c("player", "forward")) %&gt;%
  # create a variable to count the number of forwards
* mutate(PP_fwds = select(., forward_1:forward_5) %&gt;%
*          rowSums(na.rm = TRUE)) %&gt;%
  # remove the now-unnecessary variables
  select(-c(player_1:forward_5))
```

---

# Play by play


```r
data &lt;- pivot_position %&gt;%
  # first create a basic count variable for each player within a PP
  group_by(game_id, event_index) %&gt;%
  mutate(on_ice = row_number()) %&gt;%
  ungroup() %&gt;% 
  # pivot the players and positions
  pivot_wider(names_from = "on_ice", 
              values_from = c("player", "forward")) %&gt;%
  # create a variable to count the number of forwards
  mutate(PP_fwds = select(., forward_1:forward_5) %&gt;% 
           rowSums(na.rm = TRUE)) %&gt;%
  # remove the now-unnecessary variables
* select(-c(player_1:forward_5))
```

---

# Play by play

&lt;table class="table" style="font-size: 20px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 265 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 267 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 272 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 46 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 276 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 60 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 313 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 33 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 61 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 346 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 62 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 356 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 66 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 357 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 3 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Problems we get to solve

‚úÖ&amp;nbsp; Player position data is in a different place

&lt;br&gt;
&lt;br&gt;

‚ùå&amp;nbsp; Zone exit data is in a different place

&lt;br&gt;
&lt;br&gt;

‚ùå&amp;nbsp; One row per event instead of one row per second ü§î

---

class: inverse, center, middle

# Tracking data

---

# Tracking data

&lt;table class="table" style="font-size: 20px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_period &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; time &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_type &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 16:02:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 15:27:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 14:42:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 13:57:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 12:36:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 12:12:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 18:36:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 18:10:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 17:20:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 14:40:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Tracking data


```r
tracking &lt;- tracking %&gt;%
  # create a new variable that converts to m:s
  mutate(time_new = str_sub(time, 1, 5),
         time_new = ms(time_new),
         # create a new variable for total seconds
         seconds = minute(time_new)*60 + second(time_new),
         # create a game_seconds variable to match what's in pbp data
         game_seconds = case_when(
                            game_period == 1 ~ 1200 - seconds,
                            game_period == 2 ~ 2400 - seconds,
                            game_period == 3 ~ 3600 - seconds)) %&gt;%
  # remove now-unnecessary variables
  select(-c(time, time_new, seconds, game_period))
```

---

# Tracking data


```r
tracking &lt;- tracking %&gt;%
  # create a new variable that converts to m:s
* mutate(time_new = str_sub(time, 1, 5),
*        time_new = ms(time_new),
         # create a new variable for total seconds
         seconds = minute(time_new)*60 + second(time_new),
         # create a game_seconds variable to match what's in pbp data
         game_seconds = case_when(
                            game_period == 1 ~ 1200 - seconds,
                            game_period == 2 ~ 2400 - seconds,
                            game_period == 3 ~ 3600 - seconds)) %&gt;%
  # remove now-unnecessary variables
  select(-c(time, time_new, seconds, game_period))
```

---

# Tracking data

&lt;table class="table" style="font-size: 20px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_period &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; time &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_type &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; time_new &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 16:02:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 16M 2S &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 15:27:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 15M 27S &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 14:42:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 14M 42S &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 13:57:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 13M 57S &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 12:36:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 12M 36S &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 12:12:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 12M 12S &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 18:36:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 18M 36S &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 18:10:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 18M 10S &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 17:20:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 17M 20S &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 14:40:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 14M 40S &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Tracking data


```r
tracking &lt;- tracking %&gt;%
  # create a new variable that converts to m:s
  mutate(time_new = str_sub(time, 1, 5),
         time_new = ms(time_new), 
         # create a new variable for total seconds
*        seconds = minute(time_new)*60 + second(time_new),
         # create a game_seconds variable to match what's in pbp data
         game_seconds = case_when(
                            game_period == 1 ~ 1200 - seconds,
                            game_period == 2 ~ 2400 - seconds,
                            game_period == 3 ~ 3600 - seconds)) %&gt;%
  # remove now-unnecessary variables
  select(-c(time, time_new, seconds, game_period))
```

---

# Tracking data

&lt;table class="table" style="font-size: 20px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_period &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; time &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_type &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; time_new &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; seconds &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 16:02:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16M 2S &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 962 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 15:27:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15M 27S &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 927 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 14:42:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14M 42S &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 882 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 13:57:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 13M 57S &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 837 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 12:36:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12M 36S &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 756 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 12:12:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12M 12S &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 732 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 18:36:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18M 36S &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1116 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 18:10:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18M 10S &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1090 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 17:20:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17M 20S &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1040 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 14:40:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14M 40S &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 880 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Tracking data


```r
tracking &lt;- tracking %&gt;%
  # create a new variable that converts to m:s
  mutate(time_new = str_sub(time, 1, 5),
         time_new = ms(time_new), 
         # create a new variable for total seconds
         seconds = minute(time_new)*60 + second(time_new), 
         # create a game_seconds variable to match what's in pbp data
*        game_seconds = case_when(
*                           game_period == 1 ~ 1200 - seconds,
*                           game_period == 2 ~ 2400 - seconds,
*                           game_period == 3 ~ 3600 - seconds)) %&gt;%
  # remove now-unnecessary variables
  select(-c(time, time_new, seconds, game_period))
```

---

# Tracking data

&lt;table class="table" style="font-size: 20px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_type &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 238 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 273 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 318 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 363 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 444 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 468 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1284 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1310 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1360 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; EXIT &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1520 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

class: middle, center, inverse

# Padding our data

---

# What's the goal?

We want to expand our data: one row per event ‚û°Ô∏è&amp;nbsp; one row per second

&lt;br&gt;
&lt;br&gt;
--

So we can more easily:

1Ô∏è‚É£&amp;nbsp; Examine the average composition of a power play per second

2Ô∏è‚É£&amp;nbsp; Join in our manually-tracked data

&lt;br&gt;
&lt;br&gt;
--

Thankfully, we have the `padr` package.

---

# Padding our data


```r
data &lt;- data %&gt;%
  # create an 0/1 variable to identify a new power play
  # and a power_play_count variable
  mutate(new_power_play = ifelse(lag(game_seconds + event_length) == 
                                   game_seconds &amp; lag(PP_team) == 
                                   PP_team, 0, 1),
         new_power_play = ifelse(is.na(new_power_play), 
                                 1, new_power_play),
         power_play_count = cumsum(new_power_play)) %&gt;%
  select(power_play_count, everything())
```

---

# Padding our data


```r
data &lt;- data %&gt;%
  # create an 0/1 variable to identify a new power play
  # and a power_play_count variable
* mutate(new_power_play = ifelse(lag(game_seconds + event_length) ==
*                                  game_seconds &amp; lag(PP_team) ==
*                                  PP_team, 0, 1),
*        new_power_play = ifelse(is.na(new_power_play),
*                                1, new_power_play),
         power_play_count = cumsum(new_power_play)) %&gt;%
  select(power_play_count, everything())
```

---

# Padding our data

&lt;table class="table" style="font-size: 18px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; new_power_play &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 265 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 267 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 272 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 46 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 276 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 60 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 313 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 33 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 61 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 346 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 62 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 356 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 66 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 357 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Padding our data


```r
data &lt;- data %&gt;%
  # create an 0/1 variable to identify a new power play
  # and a power_play_count variable
  mutate(new_power_play = ifelse(lag(game_seconds + event_length) == 
                                   game_seconds &amp; lag(PP_team) ==
                                   PP_team, 0, 1), 
         new_power_play = ifelse(is.na(new_power_play), 
                                 1, new_power_play), 
*        power_play_count = cumsum(new_power_play)) %&gt;%
  select(power_play_count, everything())
```

---

# Padding our data

&lt;table class="table" style="font-size: 14px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; new_power_play &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; power_play_count &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 265 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 267 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 272 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 46 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 276 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 60 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 313 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 33 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 61 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 346 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 62 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 356 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 66 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 357 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Padding our data


```r
data &lt;- data %&gt;%
  # create an 0/1 variable to identify a new power play
  # and a power_play_count variable
  mutate(new_power_play = ifelse(lag(game_seconds + event_length) == 
                                   game_seconds &amp; lag(PP_team) ==
                                   PP_team, 0, 1), 
         new_power_play = ifelse(is.na(new_power_play), 
                                 1, new_power_play), 
         power_play_count = cumsum(new_power_play)) %&gt;% 
* select(power_play_count, everything())
```

---

# Padding our data

&lt;table class="table" style="font-size: 14px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; power_play_count &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; new_power_play &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 265 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 267 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 272 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 46 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 276 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 60 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 313 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 33 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 61 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 346 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 62 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 356 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 66 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; PHI &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 357 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Let's do a test


```r
sample &lt;- data %&gt;%
  filter(power_play_count == 1) %&gt;%
  pad_int('game_seconds',
          start_val = 234,
          end_val = 283) %&gt;%
  fill(power_play_count, game_id, PP_team, PP_fwds, 
       .direction = "down")
```

---

# Let's do a test


```r
sample &lt;- data %&gt;%
* filter(power_play_count == 1) %&gt;%
  pad_int('game_seconds',
          start_val = 234,
          end_val = 283) %&gt;%
  fill(power_play_count, game_id, PP_team, PP_fwds, 
       .direction = "down")
```

---

# Let's do a test

&lt;table class="table" style="font-size: 14px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; power_play_count &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; new_power_play &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 265 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 267 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 272 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 46 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 276 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Let's do a test

&lt;table class="table" style="font-size: 14px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; power_play_count &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; new_power_play &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 265 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 267 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 272 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 46 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 276 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Let's do a test

&lt;table class="table" style="font-size: 14px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; power_play_count &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; new_power_play &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 265 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 267 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 272 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 46 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 276 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Let's do a test


```r
sample &lt;- data %&gt;%
  filter(power_play_count == 1) %&gt;% 
* pad_int('game_seconds',
*         start_val = 234,
*         end_val = 283) %&gt;%
  fill(power_play_count, game_id, PP_team, PP_fwds, 
       .direction = "down")
```

---

# Let's do a test

&lt;table class="table" style="font-size: 14px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; power_play_count &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; new_power_play &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 235 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 236 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 237 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 238 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 239 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 240 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 242 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 243 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Let's do a test

&lt;table class="table" style="font-size: 14px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; power_play_count &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; new_power_play &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 235 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 236 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 237 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 238 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 239 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 240 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 242 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 243 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Let's do a test


```r
sample &lt;- data %&gt;%
  filter(power_play_count == 1) %&gt;% 
  pad_int('game_seconds', 
          start_val = 234,
          end_val = 283) %&gt;% 
* fill(power_play_count, game_id, PP_team, PP_fwds,
*      .direction = "down")
```

---

# Let's do a test

&lt;table class="table" style="font-size: 14px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; power_play_count &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; new_power_play &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 235 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 236 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 237 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 238 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 239 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 240 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 242 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 243 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Let's do a test

&lt;table class="table" style="font-size: 14px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; power_play_count &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; new_power_play &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 235 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 236 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 237 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 238 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 239 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 240 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 242 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 243 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# When is it time for a function?

--

üò¨&amp;nbsp; (Don't be scared like me.)

&lt;br&gt;

--

üìù&amp;nbsp; You've copied and pasted code more than twice.

&lt;br&gt;

--

üîÅ&amp;nbsp; You need to run multiple lines of code on different segments of data.

--

&lt;br&gt;


```r
# basic syntax of a function

name_of_function &lt;- function(needed_value) {
  
  # all the code goes here
  
}
```

---

# Padding our data


```r
padding_function &lt;- function(count) {
  
  each_power_play &lt;- data %&gt;%
    filter(power_play_count == count)
  
  minimum &lt;- min(each_power_play$game_seconds)
  maximum &lt;- max(each_power_play$game_seconds + 
                   each_power_play$event_length - 1)
  
  padded &lt;- each_power_play %&gt;%
    pad_int('game_seconds',
            start_val = minimum,
            end_val = maximum) %&gt;%
    fill(power_play_count, game_id, PP_team, PP_fwds, 
         .direction = "down")
}
```

---

# Padding our data


```r
*padding_function &lt;- function(count) {
  
  each_power_play &lt;- data %&gt;%
    filter(power_play_count == count)
  
  minimum &lt;- min(each_power_play$game_seconds)
  maximum &lt;- max(each_power_play$game_seconds + 
                   each_power_play$event_length - 1)
  
  padded &lt;- each_power_play %&gt;%
    pad_int('game_seconds',
            start_val = minimum,
            end_val = maximum) %&gt;%
    fill(power_play_count, game_id, PP_team, PP_fwds, 
         .direction = "down")
}
```

---

# Padding our data


```r
padding_function &lt;- function(count) { 
  
* each_power_play &lt;- data %&gt;%
*   filter(power_play_count == count)
  
  minimum &lt;- min(each_power_play$game_seconds)
  maximum &lt;- max(each_power_play$game_seconds + 
                   each_power_play$event_length - 1)
  
  padded &lt;- each_power_play %&gt;%
    pad_int('game_seconds',
            start_val = minimum,
            end_val = maximum) %&gt;%
    fill(power_play_count, game_id, PP_team, PP_fwds, 
         .direction = "down")
}
```

---

# Padding our data


```r
padding_function &lt;- function(count) { 
  
  each_power_play &lt;- data %&gt;% 
    filter(power_play_count == count)
  
* minimum &lt;- min(each_power_play$game_seconds)
* maximum &lt;- max(each_power_play$game_seconds +
*                  each_power_play$event_length - 1)
  
  padded &lt;- each_power_play %&gt;%
    pad_int('game_seconds',
            start_val = minimum,
            end_val = maximum) %&gt;%
    fill(power_play_count, game_id, PP_team, PP_fwds, 
         .direction = "down")
}
```

---

# Padding our data


```r
padding_function &lt;- function(count) { 
  
  each_power_play &lt;- data %&gt;% 
    filter(power_play_count == count)
  
  minimum &lt;- min(each_power_play$game_seconds) 
  maximum &lt;- max(each_power_play$game_seconds +
                   each_power_play$event_length - 1)
  
* padded &lt;- each_power_play %&gt;%
*   pad_int('game_seconds',
*           start_val = minimum,
*           end_val = maximum) %&gt;%
*   fill(power_play_count, game_id, PP_team, PP_fwds,
*        .direction = "down")
}
```

---

# Padding our data

A common scenario:

&lt;br&gt;

--

‚úÇÔ∏è&amp;nbsp; Split the data into pieces

&lt;br&gt;

--

üîÅ&amp;nbsp; Apply a function to each piece

&lt;br&gt;

--

‚ûï&amp;nbsp; Put it back together

&lt;br&gt;

--

We can do this with the `map()` family of functions in the `purrr` package.

---

# Padding our data


```r
data_padded &lt;- 
  map_df(unique(data$power_play_count), padding_function)
```

--

`map_df` has two arguments: the data and the function

--


```r
unique(data$power_play_count)
```

We're telling it to perform the function for each unique value of `power_play_count` in the `data` data frame

--

It will apply our `padding_function` and return a data frame with the data padded

---

# Padding our data

&lt;table class="table" style="font-size: 14px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; power_play_count &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; new_power_play &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 235 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 236 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 237 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 238 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 239 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 240 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 242 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 243 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Padding our data

&lt;table class="table" style="font-size: 14px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; power_play_count &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; new_power_play &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2266 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020384 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CBJ &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2267 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020384 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CBJ &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2268 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020384 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CBJ &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2269 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020384 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CBJ &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2270 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020384 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CBJ &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2271 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020384 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 381 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CBJ &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2272 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020384 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CBJ &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2273 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020384 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CBJ &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2274 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020384 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CBJ &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2275 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020384 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CBJ &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Padding our data


```r
data_final &lt;- data_padded %&gt;%
  group_by(power_play_count) %&gt;%
  # add in a new variable for the second of 
  # each power play, counting up from 1
  mutate(power_play_second = row_number()) %&gt;%
  ungroup()
```

---

# Padding our data


```r
data_final &lt;- data_padded %&gt;%
  group_by(power_play_count) %&gt;%
  # add in a new variable for the second of 
  # each power play, counting up from 1
  mutate(power_play_second = row_number()) %&gt;%
* ungroup()
```

---

# Padding our data

&lt;table class="table" style="font-size: 12px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; power_play_count &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; new_power_play &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; power_play_second &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 235 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 236 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 237 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 238 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 5 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 239 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 6 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 240 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 8 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 242 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 9 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 243 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 10 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

--


```r
max(data_final$power_play_second)
```

```
## [1] 120
```

---

# Problems we get to solve

‚úÖ&amp;nbsp; Player position data is in a different place

&lt;br&gt;
&lt;br&gt;

‚ùå&amp;nbsp; Zone exit data is in a different place

&lt;br&gt;
&lt;br&gt;

‚úÖ&amp;nbsp; One row per event instead of one row per second ü§î

---

# Tracking data


```r
data_final &lt;- data_final %&gt;%
  left_join(tracking, by = c("game_id", "game_seconds"))
```

---

# Tracking data

&lt;table class="table" style="font-size: 12px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_seconds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; power_play_count &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; game_id &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_index &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_team &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_length &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; new_power_play &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; power_play_second &lt;/th&gt;
   &lt;th style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; event_type &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 234 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 235 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 236 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 237 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 238 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; EXIT &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 239 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 240 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 241 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 242 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 243 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2019020336 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; CAR &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt;  &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

--


```r
data_final %&gt;% 
  get_dupes(game_id, game_seconds)
```

```
## # A tibble: 0 x 11
## # ‚Ä¶ with 11 variables: game_id &lt;dbl&gt;, game_seconds &lt;dbl&gt;, dupe_count &lt;int&gt;,
## #   power_play_count &lt;dbl&gt;, event_index &lt;dbl&gt;, PP_team &lt;chr&gt;,
## #   event_length &lt;dbl&gt;, PP_fwds &lt;dbl&gt;, new_power_play &lt;dbl&gt;,
## #   power_play_second &lt;int&gt;, event_type &lt;chr&gt;
```

---

# Problems we get to solve

‚úÖ&amp;nbsp; Player position data is in a different place

&lt;br&gt;
&lt;br&gt;

‚úÖ&amp;nbsp; Zone exit data is in a different place

&lt;br&gt;
&lt;br&gt;

‚úÖ&amp;nbsp; One row per event instead of one row per second ü§î

---

class: center, middle, inverse

&lt;blockquote&gt;
If you can't handle the data cleaning,
you don't deserve the data analysis.
.center[-- &lt;cite&gt;Me&lt;/cite&gt;]
&lt;/blockquote&gt;

---

class: center, middle, inverse

# Does a four-forward power play unit have a higher rate of zone exits?

---

# Summarizing our data


```r
summary &lt;- data_final %&gt;%
  group_by(PP_fwds) %&gt;%
  summarize(time_on_ice = sum(event_length, na.rm = TRUE) / 60,
            exits = sum(!is.na(event_type))) %&gt;%
  mutate(exit_rate = exits * 60 / time_on_ice)
```

---

# Summarizing our data


```r
summary &lt;- data_final %&gt;% 
* group_by(PP_fwds) %&gt;%
  summarize(time_on_ice = sum(event_length, na.rm = TRUE) / 60,
            exits = sum(!is.na(event_type))) %&gt;%
  mutate(exit_rate = exits * 60 / time_on_ice)
```

---

# Summarizing our data


```r
summary &lt;- data_final %&gt;%
  group_by(PP_fwds) %&gt;%
* summarize(time_on_ice = sum(event_length, na.rm = TRUE) / 60,
            exits = sum(!is.na(event_type))) %&gt;%
  mutate(exit_rate = exits * 60 / time_on_ice)
```

---

# Summarizing our data


```r
summary &lt;- data_final %&gt;%
  group_by(PP_fwds) %&gt;%
  summarize(time_on_ice = sum(event_length, na.rm = TRUE) / 60, 
*           exits = sum(!is.na(event_type))) %&gt;%
  mutate(exit_rate = exits * 60 / time_on_ice)
```

---

# Summarizing our data


```r
summary &lt;- data_final %&gt;%
  group_by(PP_fwds) %&gt;%
  summarize(time_on_ice = sum(event_length, na.rm = TRUE) / 60, 
            exits = sum(!is.na(event_type))) %&gt;% 
* mutate(exit_rate = exits * 60 / time_on_ice)
```

---

# Summarizing our data


```r
summary &lt;- data_final %&gt;%
  group_by(PP_fwds) %&gt;%
  summarize(time_on_ice = sum(event_length, na.rm = TRUE) / 60, 
            exits = sum(!is.na(event_type))) %&gt;% 
  mutate(exit_rate = exits * 60 / time_on_ice)
```

&lt;table class="table" style="font-size: 20px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; time_on_ice &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; exits &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; exit_rate &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.25 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 90.66667 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 30.50 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 66 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 129.83607 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

class: center, middle, inverse

# Let's make a graph!

---

# The simplest graph


```r
summary %&gt;%
  ggplot(aes(x = as.character(PP_fwds), y = exit_rate)) +
  geom_bar(stat="identity")
```

&lt;img src="figs/CMSAC/unnamed-chunk-116-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---

# A little better


```r
summary %&gt;%
  ggplot(aes(x = as.character(PP_fwds), y = exit_rate)) +
  geom_bar(stat="identity") +
* labs(title = "Rate of zone exits on the power play",
*      subtitle = "5v4 only, 4 NHL games November 2019",
*      x = "Number of forwards on the power play",
*      y = "Zone exits per 60 minutes") +
* geom_text(aes(label = round(exit_rate, 2)), vjust = 1.6,
*           color = "white", size = 4)
```

---

# A little better

&lt;img src="figs/CMSAC/unnamed-chunk-118-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---

# With color!


```r
summary %&gt;%
  ggplot(aes(x = as.character(PP_fwds), y = exit_rate, 
*            fill = as.character(PP_fwds))) +
  geom_bar(stat="identity") +
  labs(title = "Rate of zone exits on the power play",
       subtitle = "5v4 only, 4 NHL games November 2019",
       x = "Number of forwards on the power play", 
       y = "Zone exits per 60 minutes") +
  geom_text(aes(label = round(exit_rate, 2)), vjust = 1.6, 
            color = "white", size = 4) +
* scale_fill_manual(values = c("#808080", "#5C164E")) +
  theme(legend.position = "none")
```

---

# With color!

&lt;img src="figs/CMSAC/unnamed-chunk-120-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---

# Much better


```r
summary %&gt;%
  ggplot(aes(x = as.character(PP_fwds), y = exit_rate, 
             fill = as.character(PP_fwds))) +
  geom_bar(stat="identity") +
  labs(title = "Rate of zone exits on the power play",
       subtitle = "5v4 only, 4 NHL games November 2019",
       x = "Number of forwards on the power play", 
       y = "Zone exits per 60 minutes") +
  geom_text(aes(label = round(exit_rate, 2)), vjust = 1.6, 
            color = "white", size = 4) +
  scale_fill_manual(values = c("#808080", "#912919")) +
* CMSAC_theme() +
  theme(legend.position = "none")
```

---

# Much better

&lt;img src="figs/CMSAC/unnamed-chunk-122-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---

# What are the benefits of creating a custom theme?

üï•&amp;nbsp; Saves time!

&lt;br&gt;
&lt;br&gt;

--

‚≠ê&amp;nbsp; Helps establish your #brand.

&lt;br&gt;
&lt;br&gt;

--

‚ù§Ô∏è&amp;nbsp; Looks way prettier than a standard `ggplot2` graph.

---

# Custom theme how-to

üìù&amp;nbsp; Use Google fonts


```r
library(showtext)
font_add_google("Open Sans", "opensans")
```

--

üìì&amp;nbsp; Design your theme


```r
CMSAC_theme &lt;- function () { 
  theme_linedraw(base_size=11, base_family="opensans") %+replace% 
    theme(
    axis.ticks = element_blank(),
    panel.grid.minor = element_blank(),
    panel.grid.major = element_blank(),
    plot.title = element_text(size = 15, hjust = 0, vjust = 0.5, 
                              margin = margin(b = 0.2, unit = "cm")),
    plot.subtitle = element_text(size = 9, face = "italic", hjust = 0, 
                  vjust = 0.5, margin = margin(b = 0.2, unit = "cm")),
    axis.title = element_text(face = "bold"))
  }
```

---

# Custom theme how-to

üìù&amp;nbsp; Use Google fonts


```r
library(showtext)
font_add_google("Open Sans", "opensans")
```

üìì&amp;nbsp; Design your theme


```r
CMSAC_theme &lt;- function () { 
* theme_linedraw(base_size=11, base_family="opensans") %+replace%
    theme(
    axis.ticks = element_blank(),
    panel.grid.minor = element_blank(),
    panel.grid.major = element_blank(),
    plot.title = element_text(size = 15, hjust = 0, vjust = 0.5, 
                              margin = margin(b = 0.2, unit = "cm")),
    plot.subtitle = element_text(size = 9, face = "italic", hjust = 0, 
                  vjust = 0.5, margin = margin(b = 0.2, unit = "cm")),
    axis.title = element_text(face = "bold"))
  }
```

---

# Custom theme how-to

üìù&amp;nbsp; Use Google fonts


```r
library(showtext)
font_add_google("Open Sans", "opensans")
```

üìì&amp;nbsp; Design your theme


```r
CMSAC_theme &lt;- function () { 
  theme_linedraw(base_size=11, base_family="opensans") %+replace% 
    theme(
*   axis.ticks = element_blank(),
*   panel.grid.minor = element_blank(),
*   panel.grid.major = element_blank(),
    plot.title = element_text(size = 15, hjust = 0, vjust = 0.5, 
                              margin = margin(b = 0.2, unit = "cm")),
    plot.subtitle = element_text(size = 9, face = "italic", hjust = 0, 
                  vjust = 0.5, margin = margin(b = 0.2, unit = "cm")),
    axis.title = element_text(face = "bold"))
  }
```

---

# Custom theme how-to

üìù&amp;nbsp; Use Google fonts


```r
library(showtext)
font_add_google("Open Sans", "opensans")
```

üìì&amp;nbsp; Design your theme


```r
CMSAC_theme &lt;- function () { 
  theme_linedraw(base_size=11, base_family="opensans") %+replace% 
    theme(
    axis.ticks = element_blank(), 
    panel.grid.minor = element_blank(), 
    panel.grid.major = element_blank(), 
*   plot.title = element_text(size = 15, hjust = 0, vjust = 0.5,
*                             margin = margin(b = 0.2, unit = "cm")),
*   plot.subtitle = element_text(size = 9, face = "italic", hjust = 0,
*                 vjust = 0.5, margin = margin(b = 0.2, unit = "cm")),
*   axis.title = element_text(face = "bold"))
  }
```

---

# Custom theme how-to

1Ô∏è‚É£&amp;nbsp; Start with an existing theme: `theme_linedraw()`, `theme_classic()`, `theme_light()`, `theme_minimal()`, etc.

--

2Ô∏è‚É£&amp;nbsp; Use the [ggplot2 theme reference page](https://ggplot2.tidyverse.org/reference/theme.html) to find your arguments.

--

3Ô∏è‚É£&amp;nbsp; Investigate the options within those arguments.


```r
theme_minimal &lt;- theme_minimal()
theme_minimal$plot.subtitle
```

```
## List of 11
##  $ family       : NULL
##  $ face         : NULL
##  $ colour       : NULL
##  $ size         : NULL
##  $ hjust        : num 0
##  $ vjust        : num 1
##  $ angle        : NULL
##  $ lineheight   : NULL
##  $ margin       : 'margin' num [1:4] 0pt 0pt 5.5pt 0pt
##   ..- attr(*, "valid.unit")= int 8
##   ..- attr(*, "unit")= chr "pt"
##  $ debug        : NULL
##  $ inherit.blank: logi TRUE
##  - attr(*, "class")= chr [1:2] "element_text" "element"
```

---

class: center, middle, inverse

# How does the positional composition change over the time of the power play?

---

# Summarizing our data


```r
time &lt;- data_final %&gt;%
  group_by(power_play_second, PP_fwds) %&gt;%
  summarize(n = n()) %&gt;%
  add_tally(n, name = "total") %&gt;%
  mutate(percent = n / total)
```

---

# Summarizing our data


```r
time &lt;- data_final %&gt;%
* group_by(power_play_second, PP_fwds) %&gt;%
* summarize(n = n()) %&gt;%
  add_tally(n, name = "total") %&gt;%
  mutate(percent = n / total)
```

---

# Summarizing our data

&lt;table class="table" style="font-size: 20px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; power_play_second &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; n &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Summarizing our data


```r
time &lt;- data_final %&gt;%
  group_by(power_play_second, PP_fwds) %&gt;%
  summarize(n = n()) %&gt;% 
* add_tally(n, name = "total") %&gt;%
  mutate(percent = n / total)
```

---

# Summarizing our data

&lt;table class="table" style="font-size: 20px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; power_play_second &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; n &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; total &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 27 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 27 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 27 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 27 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 27 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 27 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 27 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 27 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 26 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 26 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Summarizing our data


```r
time &lt;- data_final %&gt;%
  group_by(power_play_second, PP_fwds) %&gt;%
  summarize(n = n()) %&gt;% 
  add_tally(n, name = "total") %&gt;% 
* mutate(percent = n / total)
```

---

# Summarizing our data

&lt;table class="table" style="font-size: 20px; width: auto !important; "&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; power_play_second &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; PP_fwds &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; n &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; total &lt;/th&gt;
   &lt;th style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; percent &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0.3333333 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0.6666667 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0.3333333 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0.6666667 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0.3333333 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0.6666667 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0.3333333 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0.6666667 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0.3076923 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 26 &lt;/td&gt;
   &lt;td style="text-align:right;font-weight: bold;color: white !important;background-color: #5C164E !important;"&gt; 0.6923077 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Making an area graph


```r
time %&gt;%
  mutate(PP_fwds = ifelse(PP_fwds == 3, 
                          "3 forwards", "4 forwards")) %&gt;%
  ggplot(aes(x = power_play_second, y = percent, fill = PP_fwds)) + 
  geom_area() +
  labs(title = "Composition of the power play",
       subtitle = "5v4 only, 4 NHL games November 2019",
       x = "Second of the power play") +
  scale_fill_manual(values = c("#808080", "#912919")) +
  scale_y_continuous(labels = scales::percent_format(accuracy = 1),
                     expand = c(0, 0)) +
  scale_x_continuous(limits = c(1, 120),
                     breaks = seq(0, 120, 20),
                     expand = c(0, 0)) +
  CMSAC_theme() +
  theme(legend.position = c(0.87, 1.106),
        legend.title = element_blank(),
        axis.title.y = element_blank())
```

---

# Making an area graph

&lt;img src="figs/CMSAC/unnamed-chunk-140-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---

# Making an area graph


```r
time %&gt;%
* mutate(PP_fwds = ifelse(PP_fwds == 3,
*                         "3 forwards", "4 forwards")) %&gt;%
  ggplot(aes(x = power_play_second, y = percent, fill = PP_fwds)) + 
  geom_area() +
  labs(title = "Composition of the power play",
       subtitle = "5v4 only, 4 NHL games November 2019",
       x = "Second of the power play") +
  scale_fill_manual(values = c("#808080", "#912919")) +
  scale_y_continuous(labels = scales::percent_format(accuracy = 1),
                     expand = c(0, 0)) +
  scale_x_continuous(limits = c(1, 120),
                     breaks = seq(0, 120, 20),
                     expand = c(0, 0)) +
  CMSAC_theme() +
  theme(legend.position = c(0.87, 1.106),
        legend.title = element_blank(),
        axis.title.y = element_blank())
```

---

# Making an area graph


```r
time %&gt;%
  mutate(PP_fwds = ifelse(PP_fwds == 3, 
                          "3 forwards", "4 forwards")) %&gt;%
  ggplot(aes(x = power_play_second, y = percent, fill = PP_fwds)) + 
* geom_area() +
  labs(title = "Composition of the power play",
       subtitle = "5v4 only, 4 NHL games November 2019",
       x = "Second of the power play") +
  scale_fill_manual(values = c("#808080", "#912919")) +
  scale_y_continuous(labels = scales::percent_format(accuracy = 1),
                     expand = c(0, 0)) +
  scale_x_continuous(limits = c(1, 120),
                     breaks = seq(0, 120, 20),
                     expand = c(0, 0)) +
  CMSAC_theme() +
  theme(legend.position = c(0.87, 1.106),
        legend.title = element_blank(),
        axis.title.y = element_blank())
```

---

# Making an area graph


```r
time %&gt;%
  mutate(PP_fwds = ifelse(PP_fwds == 3, 
                          "3 forwards", "4 forwards")) %&gt;%
  ggplot(aes(x = power_play_second, y = percent, fill = PP_fwds)) + 
  geom_area() + 
  labs(title = "Composition of the power play",
       subtitle = "5v4 only, 4 NHL games November 2019",
       x = "Second of the power play") +
  scale_fill_manual(values = c("#808080", "#912919")) +
* scale_y_continuous(labels = scales::percent_format(accuracy = 1),
*                    expand = c(0, 0)) +
* scale_x_continuous(limits = c(1, 120),
*                    breaks = seq(0, 120, 20),
*                    expand = c(0, 0)) +
  CMSAC_theme() +
  theme(legend.position = c(0.87, 1.106),
        legend.title = element_blank(),
        axis.title.y = element_blank())
```

---

# Making an area graph

&lt;img src="figs/CMSAC/unnamed-chunk-144-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---

# Making an area graph


```r
time %&gt;%
  mutate(PP_fwds = ifelse(PP_fwds == 3, 
                          "3 forwards", "4 forwards")) %&gt;%
  ggplot(aes(x = power_play_second, y = percent, fill = PP_fwds)) + 
  geom_area() + 
  labs(title = "Composition of the power play",
       subtitle = "5v4 only, 4 NHL games November 2019",
       x = "Second of the power play") +
  scale_fill_manual(values = c("#808080", "#912919")) +
  scale_y_continuous(labels = scales::percent_format(accuracy = 1),
                     expand = c(0, 0)) +
  scale_x_continuous(limits = c(1, 120),
                     breaks = seq(0, 120, 20),
                     expand = c(0, 0)) + 
  CMSAC_theme() +
* theme(legend.position = c(0.87, 1.106),
*       legend.title = element_blank(),
*       axis.title.y = element_blank())
```

---

# We've done a lot!

&lt;img src="figs/CMSAC/Rudd.gif" width="300" style="display: block; margin: auto;" /&gt;

‚≠ê&amp;nbsp; Pivoted and joined data with `tidyr` and `dplyr`.

&lt;br&gt;

‚≠ê&amp;nbsp; Wrote our own function and used `purrr` to apply it iteratively.

&lt;br&gt;

‚≠ê&amp;nbsp; Created a custom theme and made an area graph.

&lt;br&gt;

--

‚ùó&amp;nbsp; Slides/data/code are available on my website and Github so you can review.

---

class: center, middle

# Thanks!

`&lt;i class="fab  fa-twitter "&gt;&lt;/i&gt;`{=html} [@MeghanMHall](https://twitter.com/MeghanMHall)
&lt;br&gt;
`&lt;i class="fab  fa-github "&gt;&lt;/i&gt;`{=html} [meghall06](https://github.com/meghall06) 
&lt;br&gt;
`&lt;i class="fas  fa-link "&gt;&lt;/i&gt;`{=html} [meghan.rbind.io](https://meghan.rbind.io)
&lt;br&gt;
`&lt;i class="fas  fa-envelope "&gt;&lt;/i&gt;`{=html} meghanhall6@gmail.com
&lt;br&gt;
&lt;br&gt;
Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan).
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"slideNumberFormat": "%current%"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
